<!DOCTYPE html>

<html>
    <head>
        <title>Frontend Validation</title>

        <link rel="stylesheet" href="css/stylesheet.css">
    </head>

<body>
    <section>
        <form action = "index.html" id="newTaskForm" name="newTaskForm">

            <legend>New Task Form</legend>
            
            <div class="tooltip">
                <p>
                    <label for="newTask">New Task:</label>
                        <input type="text" placeholder="Required and must contain no html characters" id="newTaskInput" name="newTask" required="required">
                        <span class="tooltiptext">Enter your new task here. </span>
                </p>
            </div>

            <div>
                <h6 id="error"></h6>
            </div>

            <div class="tooltip">
                <p class="formfield">
                    <label for="taskDescription">Task Description:</label>
                        <textarea id="about" placeholder="Optional" name="user_about"></textarea>
                        <span class="tooltiptext">Enter a description for your task here.</span>
                </p>
            </div>

            <div class="tooltip">
                <p class="textafter">
                    <label for="dueDate">Set Task due date:</label>
                        <input type="date" id="dueDate" name="dueDate" required="required">
                        <span class="tooltiptext">Enter the due date for your task here.</span>
                </p>
            </div>

            <div class="tooltip">
                <p class="textafter">
                    <label for="dueTime">Set Task due time:</label>
                        <input type="time" id="dueTime" name="dueTime" required="required">
                        <span class="tooltiptext">Enter the time your task is due here.</span>
                </p>
            </div>
            
                <!--<input type="submit" onclick="formValidation()" value="Submit">-->
        </form>

        <div class="tooltip">
                <button id="submit" type="button" form ="newTaskForm" formmethod="post" onclick="validate()">Submit</button>
                <span class="tooltiptext">Click here to add your new task.</span>
        </div>
        
    </section>

<ul id="taskList"></ul>

</div>

<script>

    
    function formValidation(){

        let newTask = document.getElementById("newTaskInput").value;
        
        if(newTask.includes('<') || newTask.includes('>')){
            
            document.getElementById("error").innerHTML = "Please make sure your task contains no HTML characters";
        }else{
            document.getElementById("error").innerHTML = "";
            addToList();
        } 
    }

    function addToList(){

        let newTask = document.getElementById("newTaskInput").value;

        const list = document.createElement("li");
        list.innerHTML = newTask;
        document.getElementById("taskList").appendChild(list);

    }

    function validate() {

      if( document.newTaskForm.newTask.value == "" ) {
         alert( "Please enter a new task!" );
         document.newTaskForm.newTask.focus() ;
         return false;
      }

      if( document.newTaskForm.dueDate.value == "" ) {
         alert( "Please enter a due date!" );
         document.newTaskForm.dueDate.focus() ;
         return false;
      }

      if( document.newTaskForm.dueTime.value == "" ) {
         alert( "Please enter a time due!" );
         document.newTaskForm.dueTime.focus() ;
         return false;
      }

      formValidation();
    }
</script>

</body>